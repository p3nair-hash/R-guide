<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 5: Yale Stats</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>
<nav><a href="index.html">&larr; Back to Town</a></nav>
<header>
  <h1>Module 5: Yale Daily News</h1>
  <p>"I don't care what you 'feel', Doyle. Show me the P-value."</p>
</header>

<div class="concept-card">
  <h2>1. Data Cleaning (The Kirk Penguin)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> Before you run any stats, you must check your data for errors. If you see a penguin that weighs 120kg, that is not a penguin. That is Kirk in a costume.</p>
    <p>Leaving outliers in your data will ruin your T-test (skewing the mean).</p>
    <p><strong>The Fix:</strong> Use <code>filter()</code> to remove rows that are biologically impossible.</p>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: Remove the Giant</h3>
    <ul class="instruction-list">
      <li>Filter <code>penguins</code> to keep mass less than <code>120</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="penguins |> filter(mass_kg < 120)"
                data-output="[Filtered: 1 row removed]">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>2. Normality Check (The KS Test)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> Most statistical tests (like the T-Test) assume your data follows a <strong>Normal Distribution</strong> (Bell Curve).</p>

    <p>We use the <strong>Kolmogorov-Smirnov Test</strong> (`ks.test`) to check this.</p>
    <ul>
      <li><strong>Null Hypothesis ($H_0$):</strong> The data IS Normal.</li>
      <li><strong>Alternative Hypothesis ($H_1$):</strong> The data is NOT Normal.</li>
      <li><strong>The Rule:</strong> If P < 0.05, you REJECT the Null (The data is weird/skewed).</li>
    </ul>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: Run the Test</h3>
    <ul class="instruction-list">
      <li>Run <code>ks.test</code> on the <code>mass</code> vector.</li>
      <li>Use arguments: <code>y="pnorm"</code>, <code>mean=mean(mass)</code>, <code>sd=sd(mass)</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer='ks.test(x = mass, y = "pnorm", mean = mean(mass), sd = sd(mass))'
                data-output="One-sample Kolmogorov-Smirnov test<br>D = 0.12, p-value = 0.003<br>(Not Normal)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>3. The Makeover (Log Transform)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> If your KS Test failed (P < 0.05), you can't run a T-Test yet. You need to fix the skew.</p>
    <p>A <strong>Log Transformation</strong> squashes extremely large numbers down, making the data look more normal.</p>

    <p>We use <code>log10()</code> inside a <code>mutate()</code> command to create a new, fixed column.</p>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: Log It</h3>
    <ul class="instruction-list">
      <li>Create a new column <code>log_mass</code>.</li>
      <li>Calculate it using <code>log10(mass_kg)</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="penguins |> ...">
        <button class="check-btn"
                data-answer="penguins |> mutate(log_mass = log10(mass_kg))"
                data-output="  mass_kg  log_mass<br>1 4500     3.65">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>4. One-Sample T-Test (The Standard)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> This test compares the mean of <strong>ONE group</strong> against a specific, known number (like a national average or a recommended limit).</p>
    <p><strong>Example:</strong> Do UCSD students eat more salt than the recommended 140 mEq/L?</p>
    <p><strong>Syntax:</strong> <code>t.test(vector, mu = number)</code></p>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: Salt Levels</h3>
    <ul class="instruction-list">
      <li>Run a t-test on <code>sodium_vector</code>.</li>
      <li>Compare it to the limit <code>mu = 140</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="t.test(sodium_vector, mu = 140)"
                data-output="One Sample t-test<br>t = 3.5, p-value = 0.002<br>(Significant difference)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>5. Paired T-Test (Before & After)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> Use this when you measure the <strong>SAME subject</strong> twice.</p>
    <ul>
      <li>Measuring Kirk's anxiety <em>before</em> coffee vs. <em>after</em> coffee.</li>
      <li>Comparing Cream A vs. Cream B on the <em>left vs. right arm</em> of the same person.</li>
    </ul>

    <p><strong>Crucial:</strong> You MUST add the argument <code>paired = TRUE</code>, or R will treat them as different people!</p>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: Skin Cream Test</h3>
    <ul class="instruction-list">
      <li>Compare <code>Cream_A</code> and <code>Cream_B</code> vectors.</li>
      <li>Set <code>paired = TRUE</code>.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="t.test(Cream_A, Cream_B, paired = TRUE)"
                data-output="Paired t-test<br>t = -5.1, p-value = 0.0001<br>(Significant difference)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>6. Unpaired T-Test (Two Groups)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> Use this when you are comparing two <strong>independent</strong> groups of people.</p>
    <ul>
      <li>Chilton Students vs. Stars Hollow High Students.</li>
      <li>Lizards that survived vs. Lizards that died.</li>
    </ul>

    <p><strong>Syntax:</strong> We use the Tilde (<code>~</code>) which means "by".<br><code>t.test(Numeric ~ Group, data = df)</code></p>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: Lizard Survival</h3>
    <ul class="instruction-list">
      <li>Compare <code>horn_length</code> by <code>survival</code> group.</li>
      <li>Use the <code>~</code> syntax with the <code>lizards</code> data.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer="t.test(horn_length ~ survival, data = lizards)"
                data-output="Two Sample t-test<br>t = 2.1, p-value = 0.04<br>(Survivors were bigger)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

<div class="concept-card">
  <h2>7. Power Analysis (The Prep Work)</h2>

  <div class="lesson-text">
    <p><strong>The Concept:</strong> Paris Geller never starts a project without knowing she will succeed. <strong>Power Analysis</strong> tells you how many participants you need to guarantee you will find a significant result (if one exists).</p>
    <p><strong>The Variables:</strong></p>
    <ul>
      <li><strong>n:</strong> Sample size (How many people?).</li>
      <li><strong>delta:</strong> Effect size (How big is the difference?).</li>
      <li><strong>sd:</strong> Standard Deviation (How messy is the data?).</li>
      <li><strong>power:</strong> Probability of success (Aim for 0.8 or 80%).</li>
    </ul>
    <p><strong>The Rule:</strong> Leave ONE argument as <code>NULL</code>, and R will calculate it for you.</p>
  </div>

  <div class="instruction-box">
    <h3>üìù Mission: How Many Patients?</h3>
    <ul class="instruction-list">
      <li>You expect the drug to lower glucose by <strong>10</strong> (<code>delta=10</code>).</li>
      <li>The SD is <strong>15</strong>. You want <strong>0.8</strong> power.</li>
      <li>Calculate <code>n</code> for a <code>"paired"</code> test.</li>
    </ul>
  </div>
  <div class="editor-container">
    <div class="editor-header">script.R</div>
    <div class="editor-body">
      <div class="code-input-line">
        <span class="prompt">></span>
        <input type="text" class="editor-input input-code" placeholder="...">
        <button class="check-btn"
                data-answer='power.t.test(delta = 10, sd = 15, power = 0.8, type = "paired")'
                data-output="Paired t test power calculation<br>n = 19.9 (Round up to 20!)">Run</button>
      </div>
    </div>
    <div class="console-output feedback"></div>
  </div>
</div>

</body>
</html>